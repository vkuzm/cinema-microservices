upstream users-service {
    server users-service:8081;
}
upstream cinema-service {
    server cinema-service:8082;
}

server {
    listen 80;

    location /login {
        proxy_pass http://users-service/login/;
    }

    location /register {
        proxy_pass http://users-service/register/;
    }

    location /logout {
        proxy_pass http://users-service/logout/;
    }

    location /users {
        add_header Access-Control-Allow-Origin *;
        rewrite /users/(.*) /$1 break;
        proxy_pass http://users-service/;
    }
	
    location /cinema {
        add_header Access-Control-Allow-Origin *;
        rewrite /cinema/(.*) /$1 break;
        proxy_pass http://cinema-service/;
    }
}